<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Santa Maria Ink - StoryLife FiveM</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Lecteur vidéo en haut à droite -->
    <div class="video-player-container">
        <div class="video-logo"> 
            <a href="https://www.youtube.com/@Label_Naps">
                <img src="images/label.png" alt="Label_Naps" class="video-logo-img">
            </a>
            <div class="volume-indicator"></div>
        </div>
        <div style="position: relative;">
            <video class="mini-video-player" controls muted>
                <source src="videos/tattoo-demo.mp4" type="video/mp4">
                Votre navigateur ne supporte pas la lecture vidéo.
            </video>
            <div class="video-status" id="videoStatus">Chargement...</div>
        </div>
        <!-- Version alternative avec iframe YouTube pour les navigateurs problématiques -->
        <!-- Décommentez cette section si la vidéo locale ne fonctionne pas -->
        <!--
        <iframe class="mini-video-player"
                src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=0&mute=1&controls=1&modestbranding=1&rel=0"
                title="YouTube video player"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
        </iframe>
        -->
    </div>

    <script>
        // Gestion du lecteur vidéo
        document.addEventListener('DOMContentLoaded', function() {
            const video = document.querySelector('.mini-video-player');

            if (video) {
                console.log('Lecteur vidéo trouvé:', video);
                console.log('Source de la vidéo:', video.querySelector('source')?.src);

                // Précharger la vidéo pour améliorer les performances
                video.preload = 'auto';
                console.log('Préchargement activé');

                // Écouter l'événement de chargement de la vidéo
                video.addEventListener('loadeddata', function() {
                    console.log('Vidéo chargée avec succès');
                    document.getElementById('videoStatus').textContent = 'Prêt - Cliquez pour jouer';
                });

                video.addEventListener('error', function(e) {
                    console.error('Erreur de chargement vidéo:', e);
                    document.getElementById('videoStatus').textContent = 'Erreur de chargement';
                });

                // Écouter le démarrage de la vidéo
                video.addEventListener('play', function() {
                    document.getElementById('videoStatus').textContent = 'En lecture';
                });

                video.addEventListener('pause', function() {
                    document.getElementById('videoStatus').textContent = 'En pause';
                });

                // Fonction pour activer le son dès le lancement
                function enableVolume() {
                    // Enlever l'attribut muted si présent
                    if (video.muted) {
                        video.muted = false;
                    }
                    // Régler le volume à 10%
                    video.volume = 0.1;
                    console.log('Volume activé à 10%');
                }

                // Activer le volume dès que la vidéo commence à jouer
                video.addEventListener('play', function() {
                    setTimeout(enableVolume, 100);
                });

                // Gestion du clic pour démarrer la vidéo
                video.addEventListener('click', function() {
                    if (video.paused) {
                        video.play().then(function() {
                            console.log('Vidéo démarrée manuellement');
                        }).catch(function(e) {
                            console.log('Erreur lors du démarrage:', e);
                        });
                    }
                });

                // Écouter les événements de la vidéo
                video.addEventListener('pause', function() {
                    console.log('Vidéo mise en pause');
                });

                video.addEventListener('ended', function() {
                    console.log('Vidéo terminée');
                });

                // Gestion de la visibilité de la page (pour les navigateurs stricts)
                document.addEventListener('visibilitychange', function() {
                    if (!document.hidden && video.paused) {
                        video.play().then(function() {
                            console.log('Vidéo redémarrée après visibilité');
                        }).catch(function(e) {
                            console.log('Impossible de redémarrer:', e);
                        });
                    }
                });

                // Gestion du clic sur le lecteur pour démarrer si autoplay bloqué
                video.addEventListener('click', function() {
                    if (video.paused) {
                        video.play().then(function() {
                            console.log('Vidéo démarrée manuellement');
                        });
                    }
                });
            }
        });
    </script>

    <header>
        <img src="images/logo.png" alt="Santa Maria Ink Logo" class="header-logo">
        <h1>Santa Maria Ink</h1>
        <p>Choisissez votre catégorie de tatouage</p>
    </header>

    <main class="categories-container">
        <div class="category-card">
            <img src="images/tete.png" alt="Tatouages tête">
            <h2>Tête</h2>
            <a href="categories/tete.html" class="btn-category">Voir les tatouages</a>
        </div>

        <div class="category-card">
            <img src="images/torse.png" alt="Tatouages torse">
            <h2>Torse</h2>
            <a href="categories/torse.html" class="btn-category">Voir les tatouages</a>
        </div>

        <div class="category-card">
            <img src="images/jambe_gauche.png" alt="Tatouages jambe gauche">
            <h2>Jambe Gauche</h2>
            <a href="categories/jambe-gauche.html" class="btn-category">Voir les tatouages</a>
        </div>

        <div class="category-card">
            <img src="images/jambe_droite.png" alt="Tatouages jambe droite">
            <h2>Jambe Droite</h2>
            <a href="categories/jambe-droite.html" class="btn-category">Voir les tatouages</a>
        </div>

        <div class="category-card">
            <img src="images/bras_gauche.png" alt="Tatouages bras gauche">
            <h2>Bras Gauche</h2>
            <a href="categories/bras-gauche.html" class="btn-category">Voir les tatouages</a>
        </div>

        <div class="category-card">
            <img src="images/bras_droit.png" alt="Tatouages bras droit">
            <h2>Bras Droit</h2>
            <a href="categories/bras-droit.html" class="btn-category">Voir les tatouages</a>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Fait par <a href="https://www.youtube.com/@Douns" class="footer-link">Douns</a> pour la Marabunta</p>
    </footer>
</body>
</html>
